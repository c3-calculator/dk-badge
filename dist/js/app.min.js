(function(){"use strict";function e(e,t){return Array.prototype.slice.call((t?t:document).querySelectorAll(e))}function t(t,n="toggle"){const o=t.closest("[data-toggle-wrapper]")?t:false;if(!o)return;let i=o.getAttribute("aria-expanded");i=i=="true"?true:false;let r=o.closest("data-toggle-wrapper")||document;e(`[data-toggle-button]`,r).forEach((e=>{e.setAttribute("aria-expanded","false")}));e(`[data-toggle-content]`,r).forEach((e=>{e.setAttribute("data-expanded","false")}));if(n==="close")return;const a=o.getAttribute("aria-controls");const c=document.getElementById(a);o.setAttribute("aria-expanded",!i);c.setAttribute("data-expanded",!i)}const n=document.querySelector("[data-dk-badge]");const o={server_lifecycle:.023,server_bandwidth:125e3,france_server_efficiency:6.69e-8,international_server_efficiency:71e-13,france_electricity_carbon_intensity:.052,world_electricity_carbon_intensity:.357,europe_electricity_carbon_intensity:.2307,server_pue:1.69,network_lifecycle_impact:4.78e-9,wifi_consumption:413e-14,g4_consumption:111e-13,server_country_network_ratio:.55,viewing_country_network_ratio:.45,mobile_acv_emissions:84,desktop_acv_emissions:175,tablette_acv_emissions:75.9,mobile_lifespan:8869500,desktop_lifespan:13271400,tablette_lifespan:592200,mobile_power:.00285,desktop_power:.0294,tablette_power:.0294};function i(e,t,n){const i=e/1e3;const r={france_server_proportion:.5,international_server_proportion:.5,wifi_proportion:.5,g4_proportion:.5,mobile_proportion:n==="Mobile"?1:0,desktop_proportion:n==="Desktop"?1:0,tablette_proportion:n==="Tablet"?1:0,audience_location_france:1,audience_location_europe:0,audience_location_international:0};const a={acv:i/o.server_bandwidth*(o.server_lifecycle/1e3),usage:(r.france_server_proportion*o.france_server_efficiency*o.france_electricity_carbon_intensity+r.international_server_proportion*o.international_server_efficiency*o.world_electricity_carbon_intensity)*o.server_pue*(i*1e3)};const c={acv:o.network_lifecycle_impact*i,usage:i*8e3*(o.wifi_consumption*r.wifi_proportion+o.g4_consumption*r.g4_proportion)*(o.server_country_network_ratio*(r.france_server_proportion*o.france_electricity_carbon_intensity+r.international_server_proportion*o.world_electricity_carbon_intensity)+o.viewing_country_network_ratio*(r.audience_location_france*o.france_electricity_carbon_intensity+r.audience_location_europe*o.europe_electricity_carbon_intensity+r.audience_location_international*o.world_electricity_carbon_intensity))};const s={acv:t*(o.mobile_acv_emissions*r.mobile_proportion/o.mobile_lifespan+o.desktop_acv_emissions*r.desktop_proportion/o.desktop_lifespan+o.tablette_acv_emissions*r.tablette_proportion/o.tablette_lifespan),usage:t/3600*(o.mobile_power*r.mobile_proportion+o.desktop_power*r.desktop_proportion+o.tablette_power*r.tablette_proportion)*(r.audience_location_france*o.france_electricity_carbon_intensity+r.audience_location_europe*o.europe_electricity_carbon_intensity+r.audience_location_international*o.world_electricity_carbon_intensity)};const l=(a.acv+a.usage+c.acv+c.usage+s.acv+s.usage)*1e3;return l}function r(e,t){const o=n.querySelector(`[data-dk-badge-${e}]`);if(!o)return;o.innerHTML=t}function a(e,t,n,o){var i=[{key:"CO2",value:e.toFixed(2)+"g CO2e"},{key:"time",value:n+" sec."},{key:"device",value:o},{key:"weight",value:(t/1e3).toFixed(2)+" Ko"}];i.forEach((e=>{r(e.key,e.value)}))}let c=0;let s=0;let l="desktop";function _(){const e=navigator.userAgent.toLowerCase();const t=/iphone|android/.test(e)?"Mobile":false;const n=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)?"Tablet":false;return t||n||"Desktop"}function d(){let e=sessionStorage.getItem("dk-badge");if(e){e=JSON.parse(e);s=e.timeSpent;c=e.totalSize}}function p(){sessionStorage.setItem("dk-badge",JSON.stringify({timeSpent:s,totalSize:c}))}function u(e=performance.getEntries()){if(!e)return;if(e.length!==0){e.forEach(((e,t)=>{if("transferSize"in e){c=c+e.transferSize}}))}const t=i(c,s,l);a(t,c,s,l)}function f(e,t,n){u(e.getEntries());if(n>0){console.warn(`${n} entries got dropped due to the buffer being full.`)}}const g=new PerformanceObserver(f);let b=null;let y=function(){return setInterval((()=>{s+=1;p();if(s%5===0){u([])}else{r("time",s+" sec.")}}),1e3)};function v(){if(document.hidden){clearInterval(b);b=null}else{b=b||y()}}document.addEventListener("visibilitychange",v,false);v();document.addEventListener("DOMContentLoaded",(function(e){setTimeout((()=>{l=_();d();u();g.observe({entryTypes:["resource","navigation"]})}),500)}));document.addEventListener("click",(n=>{if(n.target.closest("[data-toggle-button]")){t(n.target.closest("[data-toggle-button]"))}else if(!n.target.closest("[data-toggle-wrapper]")){const t=e(`[data-toggle-button]`);const n=e(`[data-toggle-content]`);if(t){t.forEach((e=>{e.setAttribute("aria-expanded","false")}))}if(n){n.forEach((e=>{e.setAttribute("data-expanded","false")}))}}}));document.addEventListener("keydown",(e=>{const n=27;if(e.keyCode===n){t(e.target,"close")}}));document.addEventListener("blur",(e=>{if(e.relatedTarget&&!e.relatedTarget.closest("[data-toggle-wrapper]")){t(e.target,"close")}}),true)})();